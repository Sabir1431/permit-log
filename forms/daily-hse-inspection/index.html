<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily HSE Inspection Report</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts Import -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2D3B55', // Deep slate blue
                        accent: '#4FD1C5',  // Teal
                        background: '#E0E7FF', // Light lavender/sky blue for overall page background
                        card: '#FFFFFF', // White for the form card
                        text: '#334155', // Darker gray for general text
                        'text-light': '#64748B', // Lighter gray for labels
                        success: '#10B981', // Green for success
                        warning: '#EF4444', // Red for warnings
                    },
                    fontFamily: {
                        display: ['Outfit', 'sans-serif'],
                        body: ['Inter', 'sans-serif'],
                    },
                    boxShadow: {
                        '3xl': '0 35px 60px -15px rgba(0, 0, 0, 0.3)',
                    }
                }
            }
        }
    </script>

    <style>
        /* Base styles for the outer document */
        body {
            font-family: var(--font-body, 'Inter', sans-serif);
            color: theme('colors.text');
            background: linear-gradient(135deg, theme('colors.background') 0%, theme('colors.accent') 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 1rem;
            box-sizing: border-box;
            line-height: 1.6;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-display, 'Outfit', sans-serif);
            color: theme('colors.primary');
        }

        /* --- Styles extracted and adapted from the report_form_html description --- */
        /* Note: Some color and font values are adapted to fit the new Tailwind palette */

        /* Reset and Box Sizing */
        .report-form * {
            box-sizing: border-box;
        }
        .report-form {
            margin: 0;
            padding: 0;
            background-color: theme('colors.card'); /* Form background */
            color: theme('colors.text'); /* Form text color */
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            max-width: 800px; /* To respect the form's internal max-width */
            margin: 0 auto; /* Center the form within its container */
        }
        
        .report-form h1, .report-form h2 {
            font-family: var(--font-display, 'Outfit', sans-serif);
            text-align: center;
            color: theme('colors.primary');
            margin-bottom: 1.5rem;
        }
        .report-form h1 {
            font-size: 2.2rem;
            border-bottom: 2px solid theme('colors.accent');
            padding-bottom: 0.75rem;
        }
        .report-form h2 {
            font-size: 1.8rem;
            color: theme('colors.accent');
            margin-top: 2rem;
            margin-bottom: 1rem;
        }
        
        .report-form form {
            background-color: theme('colors.card');
            padding: 1rem 0; /* Adjusted padding as outer div handles main card padding */
            border-radius: 8px;
            box-shadow: none; /* Shadow handled by outer container */
        }
        
        .report-form fieldset {
            border: 1px solid theme('colors.primary');
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 8px;
            position: relative; /* For legend positioning */
        }
        .report-form legend {
            font-weight: 600;
            color: theme('colors.primary');
            padding: 0 0.5rem;
            background-color: theme('colors.card');
            position: absolute;
            top: -0.75rem;
            left: 1rem;
            font-size: 1.1rem;
        }
        
        .report-form .form-group {
            margin-bottom: 1.25rem;
        }
        
        .report-form label {
            display: block;
            font-weight: 500;
            color: theme('colors.text-light');
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }
        
        .report-form input[type="text"],
        .report-form input[type="date"],
        .report-form textarea,
        .report-form select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #CBD5E1; /* Light gray border */
            border-radius: 6px;
            font-size: 1rem;
            font-family: var(--font-body, 'Inter', sans-serif);
            transition: border-color 0.2s, box-shadow 0.2s;
            background-color: theme('colors.card');
            color: theme('colors.text');
        }
        
        .report-form input[type="text"]:focus,
        .report-form input[type="date"]:focus,
        .report-form textarea:focus,
        .report-form select:focus {
            border-color: theme('colors.accent');
            outline: none;
            box-shadow: 0 0 0 3px rgba(79, 209, 197, 0.3); /* Accent teal shadow */
        }
        
        .report-form textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .report-form .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
            justify-content: flex-start; /* Align buttons to start */
        }
        
        .report-form button,
        .report-form input[type="submit"] {
            background-color: theme('colors.primary');
            color: theme('colors.card');
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background-color 0.2s ease, transform 0.1s ease;
            flex-grow: 1;
            min-width: 140px;
        }

        /* Specific button colors */
        .report-form button.add-btn { background-color: theme('colors.accent'); }
        .report-form button.add-btn:hover { background-color: #38B2AC; transform: translateY(-1px); }
        .report-form button.remove-btn { background-color: theme('colors.warning'); }
        .report-form button.remove-btn:hover { background-color: #DC2626; transform: translateY(-1px); }
        .report-form button.clear-btn { background-color: #64748B; } /* Slate gray */
        .report-form button.clear-btn:hover { background-color: #475569; transform: translateY(-1px); }
        .report-form button.save-btn { background-color: theme('colors.success'); }
        .report-form button.save-btn:hover { background-color: #059669; transform: translateY(-1px); }

        .report-form button:hover,
        .report-form input[type="submit"]:hover {
            background-color: #253147; /* Slightly darker primary */
            transform: translateY(-1px);
        }
        
        .report-form .photo-upload-container,
        .report-form .observation-container {
            border: 2px dashed #CBD5E1;
            padding: 1.25rem;
            margin-top: 1.5rem;
            border-radius: 8px;
            background-color: #F8FAFC; /* Light background for dynamic fields */
            position: relative;
        }

        .report-form .photo-upload-container + .photo-upload-container,
        .report-form .observation-container + .observation-container {
            margin-top: 1rem;
        }
        
        .report-form .photo-preview {
            max-width: 100%;
            height: auto;
            display: block;
            margin-top: 1rem;
            border: 1px solid #E2E8F0;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .report-form .checklist-item {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px dotted #E2E8F0;
        }
        .report-form .checklist-item:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .report-form .checklist-options {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin-top: 0.75rem;
            margin-bottom: 1rem;
        }
        .report-form .checklist-options label {
            display: inline-flex;
            align-items: center;
            font-weight: 400;
            color: theme('colors.text');
            margin-bottom: 0;
            cursor: pointer;
            font-size: 1rem;
        }
        .report-form .checklist-options input[type="radio"] {
            margin-right: 0.5rem;
            width: auto; /* Override 100% width */
        }
        
        .report-form .signature-pad {
            border: 1px solid theme('colors.primary');
            border-radius: 8px;
            background-color: theme('colors.card');
            width: 100%;
            max-width: 100%;
            height: 200px;
            display: block;
            touch-action: none; /* Prevent scrolling on touch devices */
        }

        /* Responsive Adjustments for the form */
        @media (max-width: 600px) {
            body {
                padding: 0.5rem;
            }
            .report-form {
                padding: 1rem;
            }
            .report-form h1 {
                font-size: 1.8rem;
                padding-bottom: 0.5rem;
            }
            .report-form h2 {
                font-size: 1.5rem;
                margin-top: 1.5rem;
            }
            .report-form fieldset {
                padding: 1rem;
                margin-bottom: 1.5rem;
            }
            .report-form legend {
                font-size: 1rem;
                top: -0.6rem;
            }
            .report-form .button-group {
                flex-direction: column;
                gap: 0.75rem;
            }
            .report-form button,
            .report-form input[type="submit"] {
                width: 100%;
                min-width: unset;
                padding: 0.6rem 1rem;
            }
            .report-form .checklist-options {
                flex-direction: column;
                gap: 0.75rem;
            }
        }
    </style>
</head>
<body class="font-body antialiased">
    <div class="relative w-full max-w-screen-xl flex flex-col items-center">
        <!-- Header for the page -->
        <header class="w-full text-center py-8 mb-6 md:py-10 md:mb-8 bg-primary rounded-xl shadow-xl z-10 transition-all duration-300 hover:shadow-2xl">
            <h1 class="text-3xl md:text-5xl font-display font-extrabold text-white leading-tight tracking-tight drop-shadow-lg">
                Daily HSE Inspection Report
            </h1>
            <p class="text-sm md:text-base text-accent mt-2 font-medium tracking-wide">Ensuring Safety, Every Day</p>
        </header>

        <!-- Main content area for the embedded form -->
        <main class="w-full max-w-4xl px-4 md:px-0">
            <div class="report-form relative z-10 bg-card rounded-2xl shadow-2xl p-6 md:p-10 transition-all duration-300 hover:shadow-3xl transform hover:-translate-y-1">
                <!-- Form content directly from report_form_html description -->
                <form id="hseReportForm">
                    <fieldset>
                        <legend>General Information</legend>
                        <div class="form-group">
                            <label for="reportDate">Report Date:</label>
                            <input type="date" id="reportDate" name="reportDate" required>
                        </div>
                        <div class="form-group">
                            <label for="siteLocation">Site Location:</label>
                            <input type="text" id="siteLocation" name="siteLocation" placeholder="Enter site name or location" required>
                        </div>
                        <div class="form-group">
                            <label for="inspectorName">Inspector Name:</label>
                            <input type="text" id="inspectorName" name="inspectorName" placeholder="Enter inspector's full name" required>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Photos</legend>
                        <p class="mb-4 text-text-light text-sm">Upload relevant photos of the inspection area.</p>
                        <div id="photoContainers">
                            <div class="photo-upload-container" id="photoContainer-1">
                                <div class="form-group">
                                    <label for="photoUpload-1">Upload Photo 1:</label>
                                    <input type="file" id="photoUpload-1" name="photoUpload-1" accept="image/*" capture="camera">
                                    <img id="photoPreview-1" class="photo-preview hidden" alt="Photo Preview">
                                </div>
                                <div class="form-group">
                                    <label for="photoCaption-1">Caption for Photo 1:</label>
                                    <textarea id="photoCaption-1" name="photoCaption-1" placeholder="Describe the photo"></textarea>
                                </div>
                                <div class="button-group justify-end">
                                    <button type="button" class="remove-photo-btn remove-btn">Remove Photo</button>
                                </div>
                            </div>
                        </div>
                        <div class="button-group mt-6">
                            <button type="button" id="addPhotoBtn" class="add-btn">Add Another Photo</button>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Observations</legend>
                        <p class="mb-4 text-text-light text-sm">Document any observations, positive findings, or concerns.</p>
                        <div id="observationContainers">
                            <div class="observation-container" id="observationContainer-1">
                                <div class="form-group">
                                    <label for="observation-1">Observation 1:</label>
                                    <textarea id="observation-1" name="observation-1" placeholder="Enter your observation"></textarea>
                                </div>
                                <div class="button-group justify-end">
                                    <button type="button" class="remove-observation-btn remove-btn">Remove Observation</button>
                                </div>
                            </div>
                        </div>
                        <div class="button-group mt-6">
                            <button type="button" id="addObservationBtn" class="add-btn">Add Another Observation</button>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>HSE Checklist (ADOSH SF)</legend>
                        <p class="mb-6 text-text-light text-sm">Please assess each item below:</p>

                        <div class="checklist-item">
                            <label>1. Personal Protective Equipment (PPE) utilization and condition:</label>
                            <div class="checklist-options">
                                <label><input type="radio" name="checklist-ppe" value="Pass" required> Pass</label>
                                <label><input type="radio" name="checklist-ppe" value="Fail"> Fail</label>
                                <label><input type="radio" name="checklist-ppe" value="N/A"> N/A</label>
                            </div>
                            <textarea name="checklist-ppe-comments" placeholder="Comments (if any)"></textarea>
                        </div>

                        <div class="checklist-item">
                            <label>2. General Housekeeping and Waste Management:</label>
                            <div class="checklist-options">
                                <label><input type="radio" name="checklist-housekeeping" value="Pass" required> Pass</label>
                                <label><input type="radio" name="checklist-housekeeping" value="Fail"> Fail</label>
                                <label><input type="radio" name="checklist-housekeeping" value="N/A"> N/A</label>
                            </div>
                            <textarea name="checklist-housekeeping-comments" placeholder="Comments (if any)"></textarea>
                        </div>

                        <div class="checklist-item">
                            <label>3. Emergency Exits and Access Routes are clear and unobstructed:</label>
                            <div class="checklist-options">
                                <label><input type="radio" name="checklist-exits" value="Pass" required> Pass</label>
                                <label><input type="radio" name="checklist-exits" value="Fail"> Fail</label>
                                <label><input type="radio" name="checklist-exits" value="N/A"> N/A</label>
                            </div>
                            <textarea name="checklist-exits-comments" placeholder="Comments (if any)"></textarea>
                        </div>

                        <div class="checklist-item">
                            <label>4. Condition of Tools and Equipment (e.g., proper guarding, defects):</label>
                            <div class="checklist-options">
                                <label><input type="radio" name="checklist-tools" value="Pass" required> Pass</label>
                                <label><input type="radio" name="checklist-tools" value="Fail"> Fail</label>
                                <label><input type="radio" name="checklist-tools" value="N/A"> N/A</label>
                            </div>
                            <textarea name="checklist-tools-comments" placeholder="Comments (if any)"></textarea>
                        </div>

                        <div class="checklist-item">
                            <label>5. Fire Extinguishers are accessible, inspected, and charged:</label>
                            <div class="checklist-options">
                                <label><input type="radio" name="checklist-fire" value="Pass" required> Pass</label>
                                <label><input type="radio" name="checklist-fire" value="Fail"> Fail</label>
                                <label><input type="radio" name="checklist-fire" value="N/A"> N/A</label>
                            </div>
                            <textarea name="checklist-fire-comments" placeholder="Comments (if any)"></textarea>
                        </div>

                        <div class="checklist-item">
                            <label>6. Electrical Safety (e.g., proper wiring, no overloaded circuits):</label>
                            <div class="checklist-options">
                                <label><input type="radio" name="checklist-electrical" value="Pass" required> Pass</label>
                                <label><input type="radio" name="checklist-electrical" value="Fail"> Fail</label>
                                <label><input type="radio" name="checklist-electrical" value="N/A"> N/A</label>
                            </div>
                            <textarea name="checklist-electrical-comments" placeholder="Comments (if any)"></textarea>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Digital Signature</legend>
                        <p class="mb-4 text-text-light text-sm">Please sign below to confirm the inspection.</p>
                        <canvas id="signaturePad" class="signature-pad"></canvas>
                        <div class="button-group mt-4">
                            <button type="button" id="clearSignatureBtn" class="clear-btn">Clear Signature</button>
                            <button type="button" id="saveSignatureBtn" class="save-btn">Save Signature</button>
                        </div>
                        <img id="signaturePreview" class="photo-preview mt-4 hidden" alt="Digital Signature Preview">
                        <input type="hidden" id="signatureData" name="signatureData">
                    </fieldset>

                    <div class="button-group justify-center">
                        <input type="submit" value="Submit HSE Report">
                    </div>
                </form>
            </div>
        </main>
    </div>

    <!-- JavaScript functionality for the form (extracted from report_form_html description) -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const hseReportForm = document.getElementById('hseReportForm');
            const reportDateInput = document.getElementById('reportDate');
            reportDateInput.valueAsDate = new Date();

            // Photo Capture Functionality
            let photoCounter = 1;
            const photoContainers = document.getElementById('photoContainers');
            const addPhotoBtn = document.getElementById('addPhotoBtn');

            const attachPhotoListeners = (id) => {
                const photoUploadInput = document.getElementById(`photoUpload-${id}`);
                const photoPreview = document.getElementById(`photoPreview-${id}`);
                const removePhotoBtn = document.querySelector(`#photoContainer-${id} .remove-photo-btn`);

                photoUploadInput.addEventListener('change', function() {
                    if (this.files && this.files[0]) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            photoPreview.src = e.target.result;
                            photoPreview.classList.remove('hidden');
                        };
                        reader.readAsDataURL(this.files[0]);
                    }
                });

                removePhotoBtn.addEventListener('click', () => {
                    const currentContainers = photoContainers.querySelectorAll('.photo-upload-container');
                    if (currentContainers.length > 1) {
                        document.getElementById(`photoContainer-${id}`).remove();
                    } else {
                        // Clear the last remaining field instead of removing it
                        photoUploadInput.value = ''; // Clear file input
                        photoPreview.src = '';
                        photoPreview.classList.add('hidden');
                        document.getElementById(`photoCaption-${id}`).value = '';
                    }
                });
            };

            const addPhotoField = () => {
                photoCounter++;
                const newPhotoContainer = document.createElement('div');
                newPhotoContainer.classList.add('photo-upload-container');
                newPhotoContainer.id = `photoContainer-${photoCounter}`;
                newPhotoContainer.innerHTML = `
                    <div class="form-group">
                        <label for="photoUpload-${photoCounter}">Upload Photo ${photoCounter}:</label>
                        <input type="file" id="photoUpload-${photoCounter}" name="photoUpload-${photoCounter}" accept="image/*" capture="camera">
                        <img id="photoPreview-${photoCounter}" class="photo-preview hidden" alt="Photo Preview">
                    </div>
                    <div class="form-group">
                        <label for="photoCaption-${photoCounter}">Caption for Photo ${photoCounter}:</label>
                        <textarea id="photoCaption-${photoCounter}" name="photoCaption-${photoCounter}" placeholder="Describe the photo"></textarea>
                    </div>
                    <div class="button-group justify-end">
                        <button type="button" class="remove-photo-btn remove-btn">Remove Photo</button>
                    </div>
                `;
                photoContainers.appendChild(newPhotoContainer);
                attachPhotoListeners(photoCounter);
            };

            addPhotoBtn.addEventListener('click', addPhotoField);
            attachPhotoListeners(1); // Attach listeners for the initial photo field

            // Observations Functionality
            let observationCounter = 1;
            const observationContainers = document.getElementById('observationContainers');
            const addObservationBtn = document.getElementById('addObservationBtn');

            const attachObservationListeners = (id) => {
                const removeObservationBtn = document.querySelector(`#observationContainer-${id} .remove-observation-btn`);
                const observationTextarea = document.getElementById(`observation-${id}`);

                removeObservationBtn.addEventListener('click', () => {
                    const currentContainers = observationContainers.querySelectorAll('.observation-container');
                    if (currentContainers.length > 1) {
                        document.getElementById(`observationContainer-${id}`).remove();
                    } else {
                        // Clear the last remaining field instead of removing it
                        observationTextarea.value = '';
                    }
                });
            };

            const addObservationField = () => {
                observationCounter++;
                const newObservationContainer = document.createElement('div');
                newObservationContainer.classList.add('observation-container');
                newObservationContainer.id = `observationContainer-${observationCounter}`;
                newObservationContainer.innerHTML = `
                    <div class="form-group">
                        <label for="observation-${observationCounter}">Observation ${observationCounter}:</label>
                        <textarea id="observation-${observationCounter}" name="observation-${observationCounter}" placeholder="Enter your observation"></textarea>
                    </div>
                    <div class="button-group justify-end">
                        <button type="button" class="remove-observation-btn remove-btn">Remove Observation</button>
                    </div>
                `;
                observationContainers.appendChild(newObservationContainer);
                attachObservationListeners(observationCounter);
            };

            addObservationBtn.addEventListener('click', addObservationField);
            attachObservationListeners(1); // Attach listeners for the initial observation field

            // Digital Signature Functionality
            const signaturePadCanvas = document.getElementById('signaturePad');
            const signatureDataInput = document.getElementById('signatureData');
            const clearSignatureBtn = document.getElementById('clearSignatureBtn');
            const saveSignatureBtn = document.getElementById('saveSignatureBtn');
            const signaturePreview = document.getElementById('signaturePreview');
            const ctx = signaturePadCanvas.getContext('2d');

            let drawing = false;

            const resizeCanvas = () => {
                const rect = signaturePadCanvas.getBoundingClientRect();
                signaturePadCanvas.width = rect.width;
                signaturePadCanvas.height = rect.height;
                ctx.lineWidth = 3;
                ctx.lineCap = 'round';
                ctx.strokeStyle = '#000000';
                // If there's existing signature data, redraw it after resize
                if (signatureDataInput.value) {
                    const img = new Image();
                    img.onload = () => ctx.drawImage(img, 0, 0);
                    img.src = signatureDataInput.value;
                }
            };

            const getMouseOrTouchPos = (e) => {
                const rect = signaturePadCanvas.getBoundingClientRect();
                let clientX, clientY;

                if (e.touches && e.touches.length > 0) {
                    clientX = e.touches[0].clientX;
                    clientY = e.touches[0].clientY;
                } else {
                    clientX = e.clientX;
                    clientY = e.clientY;
                }

                return {
                    x: clientX - rect.left,
                    y: clientY - rect.top
                };
            };

            const startDrawing = (e) => {
                drawing = true;
                const pos = getMouseOrTouchPos(e);
                ctx.beginPath();
                ctx.moveTo(pos.x, pos.y);
                e.preventDefault(); // Prevent scrolling on touch devices
            };

            const draw = (e) => {
                if (!drawing) return;
                const pos = getMouseOrTouchPos(e);
                ctx.lineTo(pos.x, pos.y);
                ctx.stroke();
                e.preventDefault(); // Prevent scrolling on touch devices
            };

            const stopDrawing = () => {
                drawing = false;
                ctx.closePath();
            };

            signaturePadCanvas.addEventListener('mousedown', startDrawing);
            signaturePadCanvas.addEventListener('mousemove', draw);
            signaturePadCanvas.addEventListener('mouseup', stopDrawing);
            signaturePadCanvas.addEventListener('mouseout', stopDrawing);

            signaturePadCanvas.addEventListener('touchstart', startDrawing, { passive: false });
            signaturePadCanvas.addEventListener('touchmove', draw, { passive: false });
            signaturePadCanvas.addEventListener('touchend', stopDrawing);
            signaturePadCanvas.addEventListener('touchcancel', stopDrawing);

            clearSignatureBtn.addEventListener('click', () => {
                ctx.clearRect(0, 0, signaturePadCanvas.width, signaturePadCanvas.height);
                signatureDataInput.value = '';
                signaturePreview.src = '';
                signaturePreview.classList.add('hidden');
                alert('Signature cleared!');
            });

            const isCanvasEmpty = (canvas) => {
                const blank = document.createElement('canvas');
                blank.width = canvas.width;
                blank.height = canvas.height;
                return canvas.toDataURL() === blank.toDataURL();
            };

            saveSignatureBtn.addEventListener('click', () => {
                if (!isCanvasEmpty(signaturePadCanvas)) {
                    const dataURL = signaturePadCanvas.toDataURL();
                    signatureDataInput.value = dataURL;
                    signaturePreview.src = dataURL;
                    signaturePreview.classList.remove('hidden');
                    alert('Signature saved!');
                } else {
                    alert('Please provide a signature before saving.');
                }
            });

            window.addEventListener('resize', resizeCanvas);
            resizeCanvas(); // Initial canvas resize

            // Form Submission (Placeholder)
            hseReportForm.addEventListener('submit', (event) => {
                event.preventDefault(); // Prevent default form submission

                // Ensure signature data is captured if the canvas is not empty
                if (!signatureDataInput.value && !isCanvasEmpty(signaturePadCanvas)) {
                    const dataURL = signaturePadCanvas.toDataURL();
                    signatureDataInput.value = dataURL;
                    signaturePreview.src = dataURL;
                    signaturePreview.classList.remove('hidden');
                }

                const formData = new FormData(hseReportForm);
                const data = {};

                for (let [key, value] of formData.entries()) {
                    if (key.startsWith('photoUpload-')) {
                        // For files, store just the file name or base64 if needed
                        if (value instanceof File) {
                            data[key] = value.name; // Or convert to Base64 if needed for actual submission
                            // Example for Base64:
                            // const reader = new FileReader();
                            // reader.onload = (e) => { data[key] = e.target.result; };
                            // reader.readAsDataURL(value);
                        }
                    } else if (key === 'signatureData') {
                        // Store signature as is (Base64)
                        data[key] = value;
                    } else {
                        data[key] = value;
                    }
                }

                console.log('Submitted Data:', data);
                alert('HSE Report submitted successfully! Check console for data.');
            });
        });
    </script>
</body>
</html>
